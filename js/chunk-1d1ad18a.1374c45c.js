(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d1ad18a"],{"1da1":function(e,t,n){"use strict";function o(e,t,n,o,i,a,c){try{var r=e[a](c),s=r.value}catch(l){return void n(l)}r.done?t(s):Promise.resolve(s).then(o,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var c=e.apply(t,n);function r(e){o(c,i,a,r,s,"next",e)}function s(e){o(c,i,a,r,s,"throw",e)}r(void 0)}))}}n.d(t,"a",(function(){return i}))},"7d6f":function(e,t,n){},aa56:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"file-selector"},[e._v("\n    Select Files from Google Drive\n    "),e._m(0),n("button",{attrs:{type:"button"},on:{click:function(t){return e.driveIconClicked()}}},[e._v("\n      Connect to Google Drive\n    ")])])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("span",[e._v("Authenticate with Google Drive")])])}],a=(n("28a5"),n("7f7f"),n("96cf"),n("1da1")),c={name:"Attachment",data:function(){return{tempAttachments:[],attachments:[],pickerApiLoaded:!1,developerKey:"AIzaSyBaQZlYTmndQYCcdlkHoVtBzpZYandwaaA",clientId:"7641571087-gfgbqip8dv73gh7ojqaf0e0tr3o3ot6j.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive",oauthToken:null}},components:{},mounted:function(){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","https://apis.google.com/js/api.js"),document.head.appendChild(e)},methods:{driveIconClicked:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==this.oauthToken){e.next=4;break}return console.log("Clicked"),e.next=4,gapi.load("auth2",(function(){console.log("Auth2 Loaded"),gapi.auth2.authorize({client_id:t.clientId,scope:t.scope,immediate:!1},t.handleAuthResult)}));case 4:gapi.load("picker",(function(){console.log("Picker Loaded"),t.pickerApiLoaded=!0,t.createPicker()}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleAuthResult:function(e){console.log("Handle Auth result"),e&&!e.error&&(this.oauthToken=e.access_token,this.createPicker())},createPicker:function(){if(console.log("Create Picker"),this.pickerApiLoaded&&this.oauthToken){var e=new google.picker.DocsView;e.setIncludeFolders(!0);var t=(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.NAV_HIDDEN).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView(e).setOAuthToken(this.oauthToken).setLocale("ko").setCallback(this.pickerCallback).build();t.setVisible(!0)}},pickerCallback:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,o,i,a,c,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("PickerCallback Files : ",t.docs),"nothing",n="nothing",t[google.picker.Response.ACTION]===google.picker.Action.PICKED){for(o=t[google.picker.Response.DOCUMENTS][0],o[google.picker.Document.URL],n=o.name,i=t.docs,{fileId:o.id,oAuthToken:this.oauthToken,name:n},a=[],console.log("data",t),c=0;c<i.length;c++)r={},r.id=i[c].id,r.folderId=i[c].parentId,r.url=i[c].url,r.link=i[c].embedUrl,r.title=i[c].name,r.name=i[c].name+"."+i[c].mimeType.split("/")[1],r.type="gDrive",r.description="Shared with GDrive",r.extension="."+i[c].mimeType.substring(i[c].mimeType.lastIndexOf(".")+1),r.size=i[c].sizeBytes,r.user=JSON.parse(localStorage.getItem("user")),r.thumb=null,r.thumb_list=null,a.push(r);this.tempAttachments=[].concat(a)}this.download();case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),download:function(){var e=this.tempAttachments[0].id,t=this.tempAttachments[0].title;gapi.load("client",(function(){gapi.client.load("drive","v3",(function(){var n=gapi.auth.getToken().access_token;console.log("accessToken",n);gapi.client.drive.files.get({fileId:e,fields:"name, trashed",alt:"media"}).then((function(e){console.log(e);var n=e.body,o=window.URL.createObjectURL(new Blob([n])),i=document.createElement("a");i.href=o,i.setAttribute("download",t),document.body.appendChild(i),i.click()}))}))}))}},computed:{getTempAttachments:function(){return this.tempAttachments},getAttachments:function(){return this.attachments}}},r=c,s=(n("d9a8"),n("2877")),l=Object(s["a"])(r,o,i,!1,null,"023eacf0",null);t["default"]=l.exports},d9a8:function(e,t,n){"use strict";n("7d6f")}}]);
//# sourceMappingURL=chunk-1d1ad18a.1374c45c.js.map